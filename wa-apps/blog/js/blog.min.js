(function(a){var c=2,b=window,g=a(b),e=!1,d={url:"",target:".b-stream",count:10,scroll:null,stop:null,bottom_distance:80,content_distance:120,auto:!0,beforeLoad:null,afterLoad:null,renderContent:null,paging_selector:null,pageless_wrapper:null},f=function(){var b=d.pageless_wrapper;b.show();d.paging_selector&&a(d.paging_selector).hide();b.find("a.pageless-link").live("click",function(){h(!0);return!1});g.bind("scroll.pageless resize.pageless",h).trigger("scroll.pageless")},i=function(){g.unbind(".pageless");
d.stop&&"function"==typeof d.stop&&d.stop.apply(this,[])},k=function(){var b=d.pageless_wrapper,g=b.find(".pageless-link"),f=b.find(".pageless-progress");f.length?(g.hide(),f.show()):g.replaceWith('<i class="icon16 loading"></i>'+g.text());e=!0;"function"===typeof d.beforeLoad&&d.beforeLoad();a.get(d.url,{page:c++},function(c){var g=c.data?c.data.content:c;if(typeof d.renderContent==="function")d.renderContent(g,a(d.target));else{b.remove();a(d.target).append(g);b=d.pageless_wrapper=a(d.target+" .pageless-wrapper")}d.scroll&&
typeof d.scroll=="function"&&d.scroll.apply(this,[c,d.target]);e=false;typeof d.afterLoad==="function"&&d.afterLoad();h()})},h=function(f){if(c>=parseInt(d.count)+1)i.apply(this,[]);else if(!e){var h=!1;if(!0===f)h=!0;else if(d.auto){if(!(f=(b===window?a(document).height()-g.scrollTop()-g.height():g[0].scrollHeight-g.scrollTop()-g.height())<d.bottom_distance))f=d.pageless_wrapper,f=f.length?a(window).height()-f.position().top+g.scrollTop():0,f=f>d.content_distance;h=f}h&&k.apply(this,[])}};a.pageless=
function(b,c){("start"==b||"refresh"==b)&&f.apply(this,[]);"url"==b&&(d.url=c);a.isPlainObject(b)&&(a.extend(d,b),null===d.pageless_wrapper?d.pageless_wrapper=a(d.target+" .pageless-wrapper"):!1===d.pageless_wrapper&&(d.pageless_wrapper=a()),f.apply(this,[]))}})(jQuery);$.storage=new $.store;$.wa_blog_options=$.wa_blog_options||{};
$.wa_blog=$.extend(!0,$.wa_blog,{rights:{admin:!1},common:{options:{},parent:null,init_stack:{},init:function(a){var c=this;this.parent=$.wa_blog;this.options=$.extend(this.options,a);$(document).ready(function(){c.onDomReady(c.parent)})},onDomReady:function(a){a=a||$.wa_blog;$(window).scrollTop(0);for(var c in a)if(c!="common"&&a[c].init&&typeof a[c].init=="function")try{a[c].init($.wa_blog_options[c]||{})}catch(b){typeof console=="object"&&console.log(b)}},ajaxInit:function(a){var a=a||$.wa_blog,
c=[];$(window).scrollTop(0);for(var b in a)try{if(b!="common"&&a[b].ajaxInit&&typeof a[b].ajaxInit=="function"&&!this.init_stack[b]){a[b].ajaxInit();this.init_stack[b]=true;c[b]=true}}catch(g){c[b]=false;typeof console=="object"&&console.log(g)}return c},ajaxPurge:function(a){if(this.init_stack[a]){if($.wa_blog[a]){try{$.wa_blog[a].ajaxPurge&&typeof $.wa_blog[a].ajaxPurge=="function"&&$.wa_blog[a].ajaxPurge()}catch(c){typeof console=="object"&&console.log(c)}$.wa_blog[a]={}}this.init_stack[a]=null}},
onContentUpdate:function(){var a=this.parent,c;for(c in a)if(c!="common"&&a[c].onContentUpdate&&typeof a[c].onContentUpdate=="function")try{a[c].onContentUpdate()}catch(b){typeof console=="object"&&console.log(b)}}},plugins:{},dialogs:{pull:{},init:function(){$(".dialog-confirm").live("click",this.confirm);$(".js-confirm").live("click",this.jsConfirm)},close:function(a){$.wa_blog.dialogs.pull[a]&&$.wa_blog.dialogs.pull[a].trigger("close")},confirm:function(){var a=$(this).attr("id").replace(/-.*$/,
"");$.wa_blog.dialogs.pull[a]=$("#"+a+"-dialog").waDialog({disableButtonsOnSubmit:true,onSubmit:function(){return false}});return false},jsConfirm:function(){var a=$(this).attr("title")||"Are you sure?";if(!confirm(a))return false}},sidebar:{options:{key:"blog/collapsible/"},init:function(){var a=this;$(".menu-collapsible .collapse-handler").each(function(){a.restore(this);$(this).click(function(){return a.toggle(this)})});$.wa_blog.rights.admin>1&&$("#blogs").sortable({containment:"parent",distance:5,
tolerance:"pointer",stop:a.sortHandler});var c=function(){var a=$(this).data("contact-id");if(a){$("#blog-drafts li[data-contact-id!="+a+"]").hide();$.storage.set("blog/my-drafts",1);g.show();e.hide();e.closest(".block").find(".title").hide().filter(".b-my-drafts").show()}else{$("#blog-drafts li").show();$.storage.del("blog/my-drafts");e.show();g.hide();g.closest(".block").find(".title").hide().filter(".b-all-drafts").show()}return false},b=function(){var a=$(this).find("i"),b=$.storage.get("blog/my-drafts");
if(a.hasClass("rarr")){e.hide();g.hide();a=$(this).closest(".block");if(b){a.find(".counter").hide().filter(".b-my-drafts").show();a.find(".title").hide().filter(".b-my-drafts").show()}else{a.find(".counter").hide().filter(".b-all-drafts").show();a.find(".title").hide().filter(".b-all-drafts").show()}}else b?c.apply(e.find("a").get(0)):c.apply(g.find("a").get(0))},g=$("#b-all-drafts"),e=$("#b-my-drafts");e.length||$.storage.del("blog/my-drafts");var d=$("#blog-drafts").closest(".block").find(".collapse-handler");
d.click(b);b.apply(d.get(0));g.find("a").click(c);e.find("a").click(c)},sortHandler:function(a,c){var b="?module=blog&action=sort&blog_id="+$(c.item).attr("id").replace("blog_li_item_","")+"&sort="+($(c.item).index()+1);$.get(b,function(a){if(!a||!(a.status&&a.status=="ok"))return false},"json")},toggle:function(a){$(a).find(".rarr").length?this.show(a):$(this).find(".darr")&&this.hide(a);return false},show:function(a){var a=$(a),c=a.parent().find("ul.collapsible");c.show();c.attr("id")=="blog-drafts"&&
a.find(".count").hide();a.find(".rarr").removeClass("rarr").addClass("darr");$.storage.set(this.options.key+c.attr("id"),null)},hide:function(a){var a=$(a),c=a.parent().find("ul.collapsible");c.attr("id")=="blog-drafts"&&a.find(".count").show();c.hide();a.find(".darr").removeClass("darr").addClass("rarr");$.storage.set(this.options.key+c.attr("id"),2)},restore:function(a){var c=$(a).parent().find("ul.collapsible").attr("id");if(c)try{parseInt($.storage.get(this.options.key+c))==2&&this.hide(a)}catch(b){typeof console==
"object"&&console.log(b)}}},helpers:{init:function(){this.compileTemplates()},compileTemplates:function(){var a=/<\\\/(\w+)/g;$("script[type$='x-jquery-tmpl']").each(function(){var c=$(this).attr("id").replace(/-template-js$/,"");try{var b=$(this).html().replace(a,"</$1");$.template(c,b)}catch(g){typeof console=="object"&&console.log(g)}})}}});(function(a){a.wa_blog.common.init()})(jQuery,this);(function(a){a.wa_blog.comments={options:{form_selector:"#b-comment-add-form",form_wrapper_selector:"#b-comment-add"},init:function(){this.parent=a.wa_blog;var c=this;a("a.b-comment-delete, a.b-comment-restore").live("click",function(a){return c.manageComment.apply(c,[this,a])});if(c.options.pageless){var b={scroll:function(){c.parent.common.onContentUpdate()}},b=a.extend(!0,b,c.options.pageless);a.pageless(b)}c.parent.common.onContentUpdate();a(".b-comment-reply").live("click",c.replyClick);a(this.options.form_selector+
" #send").click(c.formSubmit)},replyClick:function(){var c=a(this).parents(".b-comment"),b=c.length?parseInt(a(c).attr("id").replace(/^[\D]+/,"")):0;a.wa_blog.comments.formAdd(a(this).parent(),b);a(c).parents(".b-comments").find(".b-comment-reply:hidden").show();a(c).find(".b-comment-reply:visible").hide();return!1},formSubmit:function(){var c=a(this);c.attr("disabled",!0);var b=c.parent().find(".b-comment-add-form-status");b.show();var g=a("ul#b-comment-add"),e=a(a.wa_blog.comments.options.form_selector);
a.post(e.attr("action"),e.serialize(),function(d){c.attr("disabled",!1);b.hide();if(d.status&&"ok"==d.status&&d.data){var f=d.data.count_str,d=a(d.data.template).find(".b-comment"),e=null;g.prev().is(".b-form-home")?e=g.prev().prev():(e=g.parent(),e.children("ul.menu-v").not(g).size()||(e=e.append('<ul class="menu-v with-icons"></ul>').find("ul").not(g)));e.append(a("<li />").append(d));a.wa_blog.comments.formAdd(".b-form-home",0);a(".comment-count").each(function(){a(this).text(parseInt(a(this).text())+
1)});a(".b-not-comment").remove();a(".b-comment-count").show().html(f);d.trigger("plugin.comment_add");a.wa_blog.comments.formRefresh(!0)}else d.status&&"fail"==d.status?(a.wa_blog.comments.formRefresh(),a(d.errors).each(function(){var b=this;for(name in b){var c=a(a.wa_blog.comments.options.form_selector).find("[name="+name+"]"),b=a('<div class="hint errormsg"></div>').text(b[name]);c.after(b).addClass("error")}})):a.wa_blog.comments.formRefresh()},"json");return!1},formRefresh:function(c){var b=
a(a.wa_blog.comments.options.form_selector);b.parents(".b-comments").find(".b-comment-reply:hidden").show();b.find(".errormsg").remove();b.find(".error").removeClass("error");c&&b.find("textarea").val("")},formAdd:function(c,b){this.formRefresh(!1);0==a(c).size()?a(a.wa_blog.comments.options.form_wrapper_selector).hide():(a(a.wa_blog.comments.options.form_wrapper_selector).show().insertAfter(c).find("[name=text]").val(""),a(a.wa_blog.comments.options.form_wrapper_selector).find("input[name=parent]").val(b))},
manageComment:function(c){var b=a(c).hasClass("b-comment-restore")?"approved":"deleted",g=a(c).parents(".b-comment"),e=parseInt(a(g).attr("id").replace(/^[\D]+/,"")),d=this;a(c).hide().after('<i class="b-ajax-status-loading icon16 loading"></i>');a.ajax({url:"?module=comments&action=edit",type:"POST",data:{status:b,id:e},success:function(b){if("ok"==b.data.status&&b.data.changed){var c="deleted"==b.data.status?-1:1;a(".comment-count").each(function(){a(this).text(parseInt(a(this).text())+c)})}g.find("i.icon16.loading").remove();
var k=null;b&&(b.data&&b.data.count_str)&&(k=b.data.count_str);d.setCommentStatus(e,b.data.status,k)},error:function(){g.find("i.icon16.loading").remove();d.setCommentStatus(e,"approved"==b?"approved":"deleted",null)},dataType:"json"});return!1},setCommentStatus:function(c,b,g){c=a("#b-comment-"+c);"deleted"==b?(c.addClass("b-deleted"),c.find(".b-comment-delete").hide(),c.find(".b-comment-restore").show(),a.wa_blog.common.onContentUpdate()):"approved"==b&&(c.removeClass("b-deleted"),c.find(".b-comment-delete").show(),
c.find(".b-comment-restore").hide(),a.wa_blog.common.onContentUpdate());null!==g&&a(".b-comment-count").show().html(g)}}})(jQuery);$.wa_blog.plugins={options:{plugins:{}},list:null,hash:null,js:{},container:null,init:function(){var a=this;a.container=$("#blog-ajax-settings-container");a.list=$("#plugin-list").sortable({containment:"parent",distance:5,tolerance:"pointer",update:a.sortHandler});"undefined"!=typeof $.History&&$.History.bind(function(){a.dispatch()});var c=window.location.hash;"#/"===c||!c?(c=$.storage.get("blog/plugins/hash"))&&null!=c?$.wa.setHash("#/"+c):this.dispatch():$.wa.setHash(c)},sortHandler:function(a,
c){$.ajax({type:"POST",url:"?module=plugins&action=sort",data:{slug:$(c.item).attr("id").replace(/^plugin-/,""),pos:$(c.item).index()},success:function(a){(!a||!a.status||"ok"!=a.status||!a.data||"ok"!=a.data)&&self.list.sortable("cancel")},error:function(){self.list.sortable("cancel")}})},dispatch:function(a){$.wa_blog.plugins.hash="";void 0==a&&(a=window.location.hash);if(a=a.replace(/^[^#]*#\/*/,""))if(a=a.split("/"),a[0]){for(var c="",b=a.length,g=0;g<a.length;g++){var e=a[g];if(2>g)if(0===g)c=
e;else if(parseInt(e,10)!=e&&-1==e.indexOf("="))c+=e.substr(0,1).toUpperCase()+e.substr(1);else{b=g;break}else{b=g;break}}b=a.slice(b);4<=a.length&&($.wa_blog.plugins.hash=a.slice(0,2).join("/"));this.preAnyAction(c,b);this[c+"Action"]?(this[c+"Action"].apply(this,b),$.storage.set("blog/plugins/hash",a.join("/"))):console&&console.log("Invalid action name:",c+"Action")}else this.preAnyAction(),this.defaultAction();else this.preAnyAction(),this.defaultAction()},preAnyAction:function(){},settingsGenericAction:function(a){this.options.plugins[a]?
this.load("?module=plugins&action=settings&slug="+a,a):this.defaultAction()},settingsCustomAction:function(a){this.options.plugins[a]?this.load("?plugin="+a+"&action=settings",a):this.defaultAction()},select:function(a){$("#plugin-list li.selected").removeClass("selected");$("#plugin-list li#plugin-"+a).addClass("selected")},defaultAction:function(){$.storage.del("blog/plugins/hash");$.wa.setHash("#/")},directLoad:function(a){this.container.empty();this.container.html(a)},load:function(a,c){var b=
this;for(id in b.js)$.wa_blog.common.ajaxPurge(id);b.container.load(a,function(){b.select(c);b.js=$.wa_blog.common.ajaxInit()})}};(function(a){function c(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");"object"==typeof window.console&&window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}a.fn.ajaxSubmit=function(b){function g(){function d(){var b=h.attr("target"),c=h.attr("action");e.setAttribute("target",i);"POST"!=e.getAttribute("method")&&e.setAttribute("method","POST");e.getAttribute("action")!=f.url&&e.setAttribute("action",
f.url);f.skipEncodingOverride||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});f.timeout&&setTimeout(function(){n=!0;g()},f.timeout);var j=[];try{if(f.extraData)for(var m in f.extraData)j.push(a('<input type="hidden" name="'+m+'" value="'+f.extraData[m]+'" />').appendTo(e)[0]);k.appendTo("body");l.attachEvent?l.attachEvent("onload",g):l.addEventListener("load",g,!1);e.submit()}finally{e.setAttribute("action",c),b?e.setAttribute("target",b):h.removeAttr("target"),a(j).remove()}}
function g(){if(!j.aborted){var b=l.contentWindow?l.contentWindow.document:l.contentDocument?l.contentDocument:l.document;if(b&&b.location.href!=f.iframeSrc||n){l.detachEvent?l.detachEvent("onload",g):l.removeEventListener("load",g,!1);var d=!0;try{if(n)throw"timeout";var e="xml"==f.dataType||b.XMLDocument||a.isXMLDoc(b);c("isXml="+e);if(!e&&(window.opera&&(null==b.body||""==b.body.innerHTML))&&--w){c("requeing onLoad callback, DOM not available");setTimeout(g,250);return}j.responseText=b.body?b.body.innerHTML:
b.documentElement?b.documentElement.innerHTML:null;j.responseXML=b.XMLDocument?b.XMLDocument:b;j.getResponseHeader=function(a){return{"content-type":f.dataType}[a]};var i=/(json|script)/.test(f.dataType);if(i||f.textarea){var h=b.getElementsByTagName("textarea")[0];if(h)j.responseText=h.value;else if(i){var p=b.getElementsByTagName("pre")[0],r=b.getElementsByTagName("body")[0];p?j.responseText=p.textContent:r&&(j.responseText=r.innerHTML)}}else"xml"==f.dataType&&(!j.responseXML&&null!=j.responseText)&&
(j.responseXML=x(j.responseText));var b=j,q=f.dataType,e=f,t=b.getResponseHeader("content-type")||"",u="xml"===q||!q&&0<=t.indexOf("xml"),o=u?b.responseXML:b.responseText;u&&"parsererror"===o.documentElement.nodeName&&a.error&&a.error("parsererror");e&&e.dataFilter&&(o=e.dataFilter(o,q));"string"===typeof o&&("json"===q||!q&&0<=t.indexOf("json")?o=y(o):("script"===q||!q&&0<=t.indexOf("javascript"))&&a.globalEval(o));v=o}catch(s){c("error caught:",s),d=!1,j.error=s,f.error&&f.error.call(f.context,
j,"error",s),m&&a.event.trigger("ajaxError",[j,f,s])}j.aborted&&(c("upload aborted"),d=!1);d&&(f.success&&f.success.call(f.context,v,"success",j),m&&a.event.trigger("ajaxSuccess",[j,f]));m&&a.event.trigger("ajaxComplete",[j,f]);m&&!--a.active&&a.event.trigger("ajaxStop");f.complete&&f.complete.call(f.context,j,d?"success":"error");setTimeout(function(){k.removeData("form-plugin-onload");k.remove();j.responseXML=null},100)}}}var e=h[0];if(a(":input[name=submit],:input[id=submit]",e).length)alert('Error: Form elements must not have name or id of "submit".');
else{var f=a.extend(!0,{},a.ajaxSettings,b);f.context=f.context||f;var i="jqFormIO"+(new Date).getTime(),k=a('<iframe id="'+i+'" name="'+i+'" src="'+f.iframeSrc+'" />'),l=k[0];k.css({position:"absolute",top:"-1000px",left:"-1000px"});var j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){c("aborting upload...");this.aborted=1;k.attr("src",f.iframeSrc);j.error="aborted";
f.error&&f.error.call(f.context,j,"error","aborted");m&&a.event.trigger("ajaxError",[j,f,"aborted"]);f.complete&&f.complete.call(f.context,j,"error")}},m=f.global;m&&!a.active++&&a.event.trigger("ajaxStart");m&&a.event.trigger("ajaxSend",[j,f]);if(f.beforeSend&&!1===f.beforeSend.call(f.context,j,f))f.global&&a.active--;else if(!j.aborted){var n=0,p=e.clk;if(p){var r=p.name;r&&!p.disabled&&(f.extraData=f.extraData||{},f.extraData[r]=p.value,"image"==p.type&&(f.extraData[r+".x"]=e.clk_x,f.extraData[r+
".y"]=e.clk_y))}f.forceSync?d():setTimeout(d,10);var v,w=50,x=a.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},y=a.parseJSON||function(a){return window.eval("("+a+")")}}}}if(!this.length)return c("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof b&&(b={success:b});var e=
this.attr("action");(e="string"===typeof e?a.trim(e):"")&&(e=(e.match(/^([^#]+)/)||[])[1]);e=e||window.location.href||"";b=a.extend(!0,{url:e,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);e={};this.trigger("form-pre-serialize",[this,b,e]);if(e.veto)return c("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return c("ajaxSubmit: submit aborted via beforeSerialize callback"),
this;var d,f,i=this.formToArray(b.semantic);if(b.data)for(d in b.extraData=b.data,b.data)if(b.data[d]instanceof Array)for(var k in b.data[d])i.push({name:d,value:b.data[d][k]});else f=b.data[d],f=a.isFunction(f)?f():f,i.push({name:d,value:f});if(b.beforeSubmit&&!1===b.beforeSubmit(i,this,b))return c("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[i,this,b,e]);if(e.veto)return c("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;d=a.param(i);
"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+d,b.data=null):b.data=d;var h=this,l=[];b.resetForm&&l.push(function(){h.resetForm()});b.clearForm&&l.push(function(){h.clearForm()});if(!b.dataType&&b.target){var n=b.success||function(){};l.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(n,arguments)})}else b.success&&l.push(b.success);b.success=function(a,c,d){for(var f=b.context||b,g=0,e=l.length;g<e;g++)l[g].apply(f,[a,c,d||h,h])};d=0<a("input:file",
this).length;k="multipart/form-data"==h.attr("enctype")||"multipart/form-data"==h.attr("encoding");!1!==b.iframe&&(d||b.iframe||k)?b.closeKeepAlive?a.get(b.closeKeepAlive,g):g():a.ajax(b);this.trigger("form-submit-notify",[this,b]);return this};a.fn.ajaxForm=function(b){if(0===this.length){var g=this.selector,e=this.context;if(!a.isReady&&g)return c("DOM not ready, queuing ajaxForm"),a(function(){a(g,e).ajaxForm(b)}),this;c("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));
return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(c){c.isDefaultPrevented()||(c.preventDefault(),a(this).ajaxSubmit(b))}).bind("click.form-plugin",function(b){var c=b.target,g=a(c);if(!g.is(":submit,input:image")){c=g.closest(":submit");if(0==c.length)return;c=c[0]}var e=this;e.clk=c;"image"==c.type&&(void 0!=b.offsetX?(e.clk_x=b.offsetX,e.clk_y=b.offsetY):"function"==typeof a.fn.offset?(g=g.offset(),e.clk_x=b.pageX-g.left,e.clk_y=b.pageY-g.top):(e.clk_x=b.pageX-c.offsetLeft,
e.clk_y=b.pageY-c.offsetTop));setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var c=[];if(0===this.length)return c;var e=this[0],d=b?e.getElementsByTagName("*"):e.elements;if(!d)return c;var f,i,k,h,l,n;f=0;for(l=d.length;f<l;f++)if(i=d[f],k=i.name)if(b&&e.clk&&"image"==i.type)!i.disabled&&e.clk==i&&(c.push({name:k,value:a(i).val()}),c.push({name:k+".x",value:e.clk_x},
{name:k+".y",value:e.clk_y}));else if((h=a.fieldValue(i,!0))&&h.constructor==Array){i=0;for(n=h.length;i<n;i++)c.push({name:k,value:h[i]})}else null!==h&&"undefined"!=typeof h&&c.push({name:k,value:h});if(!b&&e.clk&&(b=a(e.clk),d=b[0],(k=d.name)&&!d.disabled&&"image"==d.type))c.push({name:k,value:b.val()}),c.push({name:k+".x",value:e.clk_x},{name:k+".y",value:e.clk_y});return c};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];this.each(function(){var e=
this.name;if(e){var d=a.fieldValue(this,b);if(d&&d.constructor==Array)for(var f=0,i=d.length;f<i;f++)c.push({name:e,value:d[f]});else null!==d&&"undefined"!=typeof d&&c.push({name:this.name,value:d})}});return a.param(c)};a.fn.fieldValue=function(b){for(var c=[],e=0,d=this.length;e<d;e++){var f=a.fieldValue(this[e],b);null===f||("undefined"==typeof f||f.constructor==Array&&!f.length)||(f.constructor==Array?a.merge(c,f):c.push(f))}return c};a.fieldValue=function(b,c){var e=b.name,d=b.type,f=b.tagName.toLowerCase();
void 0===c&&(c=!0);if(c&&(!e||b.disabled||"reset"==d||"button"==d||("checkbox"==d||"radio"==d)&&!b.checked||("submit"==d||"image"==d)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var i=b.selectedIndex;if(0>i)return null;for(var e=[],f=b.options,k=(d="select-one"==d)?i+1:f.length,i=d?i:0;i<k;i++){var h=f[i];if(h.selected){var l=h.value;l||(l=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(d)return l;e.push(l)}}return e}return a(b).val()};
a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var a=this.type,c=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==c?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==c&&(this.selectedIndex=-1)})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};
a.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};a.fn.selected=function(b){void 0===b&&(b=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(c=a(this).parent("select"),b&&(c[0]&&"select-one"==c[0].type)&&c.find("option").selected(!1),this.selected=b)})}})(jQuery);
